--! json library
--! cryptography library
local a=2^32;local b=a-1;local function c(d,e)local f,g=0,1;while d~=0 or e~=0 do local h,i=d%2,e%2;local j=(h+i)%2;f=f+j*g;d=math.floor(d/2)e=math.floor(e/2)g=g*2 end;return f%a end;local function k(d,e,l,...)local m;if e then d=d%a;e=e%a;m=c(d,e)if l then m=k(m,l,...)end;return m elseif d then return d%a else return 0 end end;local function n(d,e,l,...)local m;if e then d=d%a;e=e%a;m=(d+e-c(d,e))/2;if l then m=n(m,l,...)end;return m elseif d then return d%a else return b end end;local function o(p)return b-p end;local function q(d,r)if r<0 then return lshift(d,-r)end;return math.floor(d%2^32/2^r)end;local function s(p,r)if r>31 or r<-31 then return 0 end;return q(p%a,r)end;local function lshift(d,r)if r<0 then return s(d,-r)end;return d*2^r%2^32 end;local function t(p,r)p=p%a;r=r%32;local u=n(p,2^r-1)return s(p,r)+lshift(u,32-r)end;local v={0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0x0fc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x06ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2}local function w(x)return string.gsub(x,".",function(l)return string.format("%02x",string.byte(l))end)end;local function y(z,A)local x=""for B=1,A do local C=z%256;x=string.char(C)..x;z=(z-C)/256 end;return x end;local function D(x,B)local A=0;for B=B,B+3 do A=A*256+string.byte(x,B)end;return A end;local function E(F,G)local H=64-(G+9)%64;G=y(8*G,8)F=F.."\128"..string.rep("\0",H)..G;assert(#F%64==0)return F end;local function I(J)J[1]=0x6a09e667;J[2]=0xbb67ae85;J[3]=0x3c6ef372;J[4]=0xa54ff53a;J[5]=0x510e527f;J[6]=0x9b05688c;J[7]=0x1f83d9ab;J[8]=0x5be0cd19;return J end;local function K(F,B,J)local L={}for M=1,16 do L[M]=D(F,B+(M-1)*4)end;for M=17,64 do local N=L[M-15]local O=k(t(N,7),t(N,18),s(N,3))N=L[M-2]L[M]=(L[M-16]+O+L[M-7]+k(t(N,17),t(N,19),s(N,10)))%a end;local d,e,l,P,Q,R,S,T=J[1],J[2],J[3],J[4],J[5],J[6],J[7],J[8]for B=1,64 do local O=k(t(d,2),t(d,13),t(d,22))local U=k(n(d,e),n(d,l),n(e,l))local V=(O+U)%a;local W=k(t(Q,6),t(Q,11),t(Q,25))local X=k(n(Q,R),n(o(Q),S))local Y=(T+W+X+v[B]+L[B])%a;T=S;S=R;R=Q;Q=(P+Y)%a;P=l;l=e;e=d;d=(Y+V)%a end;J[1]=(J[1]+d)%a;J[2]=(J[2]+e)%a;J[3]=(J[3]+l)%a;J[4]=(J[4]+P)%a;J[5]=(J[5]+Q)%a;J[6]=(J[6]+R)%a;J[7]=(J[7]+S)%a;J[8]=(J[8]+T)%a end;local function Z(F)F=E(F,#F)local J=I({})for B=1,#F,64 do K(F,B,J)end;return w(y(J[1],4)..y(J[2],4)..y(J[3],4)..y(J[4],4)..y(J[5],4)..y(J[6],4)..y(J[7],4)..y(J[8],4))end;local e;local l={["\\"]="\\",["\""]="\"",["\b"]="b",["\f"]="f",["\n"]="n",["\r"]="r",["\t"]="t"}local P={["/"]="/"}for Q,R in pairs(l)do P[R]=Q end;local S=function(T)return"\\"..(l[T]or string.format("u%04x",T:byte()))end;local B=function(M)return"null"end;local v=function(M,z)local _={}z=z or{}if z[M]then error("circular reference")end;z[M]=true;if rawget(M,1)~=nil or next(M)==nil then local A=0;for Q in pairs(M)do if type(Q)~="number"then error("invalid table: mixed or invalid key types")end;A=A+1 end;if A~=#M then error("invalid table: sparse array")end;for a0,R in ipairs(M)do table.insert(_,e(R,z))end;z[M]=nil;return"["..table.concat(_,",").."]"else for Q,R in pairs(M)do if type(Q)~="string"then error("invalid table: mixed or invalid key types")end;table.insert(_,e(Q,z)..":"..e(R,z))end;z[M]=nil;return"{"..table.concat(_,",").."}"end end;local g=function(M)return'"'..M:gsub('[%z\1-\31\\"]',S)..'"'end;local a1=function(M)if M~=M or M<=-math.huge or M>=math.huge then error("unexpected number value '"..tostring(M).."'")end;return string.format("%.14g",M)end;local j={["nil"]=B,["table"]=v,["string"]=g,["number"]=a1,["boolean"]=tostring}e=function(M,z)local x=type(M)local a2=j[x]if a2 then return a2(M,z)end;error("unexpected type '"..x.."'")end;local a3=function(M)return e(M)end;local a4;local N=function(...)local _={}for a0=1,select("#",...)do _[select(a0,...)]=true end;return _ end;local L=N(" ","\t","\r","\n")local p=N(" ","\t","\r","\n","]","}",",")local a5=N("\\","/",'"',"b","f","n","r","t","u")local m=N("true","false","null")local a6={["true"]=true,["false"]=false,["null"]=nil}local a7=function(a8,a9,aa,ab)for a0=a9,#a8 do if aa[a8:sub(a0,a0)]~=ab then return a0 end end;return#a8+1 end;local ac=function(a8,a9,J)local ad=1;local ae=1;for a0=1,a9-1 do ae=ae+1;if a8:sub(a0,a0)=="\n"then ad=ad+1;ae=1 end end;error(string.format("%s at line %d col %d",J,ad,ae))end;local af=function(A)local a2=math.floor;if A<=0x7f then return string.char(A)elseif A<=0x7ff then return string.char(a2(A/64)+192,A%64+128)elseif A<=0xffff then return string.char(a2(A/4096)+224,a2(A%4096/64)+128,A%64+128)elseif A<=0x10ffff then return string.char(a2(A/262144)+240,a2(A%262144/4096)+128,a2(A%4096/64)+128,A%64+128)end;error(string.format("invalid unicode codepoint '%x'",A))end;local ag=function(ah)local ai=tonumber(ah:sub(1,4),16)local aj=tonumber(ah:sub(7,10),16)if aj then return af((ai-0xd800)*0x400+aj-0xdc00+0x10000)else return af(ai)end end;local ak=function(a8,a0)local _=""local al=a0+1;local Q=al;while al<=#a8 do local am=a8:byte(al)if am<32 then ac(a8,al,"control character in string")elseif am==92 then _=_..a8:sub(Q,al-1)al=al+1;local T=a8:sub(al,al)if T=="u"then local an=a8:match("^[dD][89aAbB]%x%x\\u%x%x%x%x",al+1)or a8:match("^%x%x%x%x",al+1)or ac(a8,al-1,"invalid unicode escape in string")_=_..ag(an)al=al+#an else if not a5[T]then ac(a8,al-1,"invalid escape char '"..T.."' in string")end;_=_..P[T]end;Q=al+1 elseif am==34 then _=_..a8:sub(Q,al-1)return _,al+1 end;al=al+1 end;ac(a8,a0,"expected closing quote for string")end;local ao=function(a8,a0)local am=a7(a8,a0,p)local ah=a8:sub(a0,am-1)local A=tonumber(ah)if not A then ac(a8,a0,"invalid number '"..ah.."'")end;return A,am end;local ap=function(a8,a0)local am=a7(a8,a0,p)local aq=a8:sub(a0,am-1)if not m[aq]then ac(a8,a0,"invalid literal '"..aq.."'")end;return a6[aq],am end;local ar=function(a8,a0)local _={}local A=1;a0=a0+1;while 1 do local am;a0=a7(a8,a0,L,true)if a8:sub(a0,a0)=="]"then a0=a0+1;break end;am,a0=a4(a8,a0)_[A]=am;A=A+1;a0=a7(a8,a0,L,true)local as=a8:sub(a0,a0)a0=a0+1;if as=="]"then break end;if as~=","then ac(a8,a0,"expected ']' or ','")end end;return _,a0 end;local at=function(a8,a0)local _={}a0=a0+1;while 1 do local au,M;a0=a7(a8,a0,L,true)if a8:sub(a0,a0)=="}"then a0=a0+1;break end;if a8:sub(a0,a0)~='"'then ac(a8,a0,"expected string for key")end;au,a0=a4(a8,a0)a0=a7(a8,a0,L,true)if a8:sub(a0,a0)~=":"then ac(a8,a0,"expected ':' after key")end;a0=a7(a8,a0+1,L,true)M,a0=a4(a8,a0)_[au]=M;a0=a7(a8,a0,L,true)local as=a8:sub(a0,a0)a0=a0+1;if as=="}"then break end;if as~=","then ac(a8,a0,"expected '}' or ','")end end;return _,a0 end;local av={['"']=ak,["0"]=ao,["1"]=ao,["2"]=ao,["3"]=ao,["4"]=ao,["5"]=ao,["6"]=ao,["7"]=ao,["8"]=ao,["9"]=ao,["-"]=ao,["t"]=ap,["f"]=ap,["n"]=ap,["["]=ar,["{"]=at}a4=function(a8,a9)local as=a8:sub(a9,a9)local a2=av[as]if a2 then return a2(a8,a9)end;ac(a8,a9,"unexpected character '"..as.."'")end;local aw=function(a8)if type(a8)~="string"then error("expected argument of type string, got "..type(a8))end;local _,a9=a4(a8,a7(a8,1,L,true))a9=a7(a8,a9,L,true)if a9<=#a8 then ac(a8,a9,"trailing garbage")end;return _ end;

local lEncode, lDecode, lDigest = a3, aw, Z;

-------------------------------------------------------------------------------
--! platoboost library

--! configuration
local service = 4259;  -- your service id, this is used to identify your service.
local secret = "c176af2c-cd4d-4adf-a02b-7524c359ad4b";  -- make sure to obfuscate this if you want to ensure security.
local useNonce = true;  -- use a nonce to prevent replay attacks and request tampering.

--! callbacks
local onMessage = function(message)
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "STATUS:",
        Text = message
    })
end

--! wait for game to load
repeat task.wait(1) until game:IsLoaded();

--! functions
local requestSending = false;
local fSetClipboard, fRequest, fStringChar, fToString, fStringSub, fOsTime, fMathRandom, fMathFloor, fGetHwid = setclipboard or toclipboard, request or http_request or syn_request, string.char, tostring, string.sub, os.time, math.random, math.floor, gethwid or function() return game:GetService("Players").LocalPlayer.UserId end

-- CHANGE 1: HTTP Request Validation
if not fRequest then
    onMessage("Your executor does not support HTTP requests.")
    return
end

local cachedLink, cachedTime = "", 0;

--! pick host
local host = "https://api.platoboost.app";
local hostResponse = fRequest({
    Url = host .. "/public/connectivity",
    Method = "GET"
});

-- CHANGE 2: Improved Host Connectivity Check
if not hostResponse or (hostResponse.StatusCode ~= 200 and hostResponse.StatusCode ~= 429) then
    host = "https://api.platoboost.net";
end

--!optimize 2
function cacheLink()
    if cachedTime + (10*60) < fOsTime() then
        local response = fRequest({
            Url = host .. "/public/start",
            Method = "POST",
            Body = lEncode({
                service = service,
                identifier = lDigest(fGetHwid())
            }),
            Headers = {
                ["Content-Type"] = "application/json"
            }
        });

        if response.StatusCode == 200 then
            local decoded = lDecode(response.Body);

            if decoded.success == true then
                cachedLink = decoded.data.url;
                cachedTime = fOsTime();
                return true, cachedLink;
            else
                onMessage(decoded.message);
                return false, decoded.message;
            end
        elseif response.StatusCode == 429 then
            local msg = "you are being rate limited, please wait 20 seconds and try again.";
            onMessage(msg);
            return false, msg;
        elseif response.StatusCode == 403 then
            local msg = "access denied (403). please wait and try again later.";
            onMessage(msg);
            return false, msg;
        end

        local msg = "Failed to cache link.";
        onMessage(msg);
        return false, msg;
    else
        return true, cachedLink;
    end
end

cacheLink();

--!optimize 2
local generateNonce = function()
    local str = ""
    for _ = 1, 16 do
        str = str .. fStringChar(fMathFloor(fMathRandom() * (122 - 97 + 1)) + 97)
    end
    return str
end

--!optimize 1
for _ = 1, 5 do
    local oNonce = generateNonce();
    task.wait(0.2)
    if generateNonce() == oNonce then
        local msg = "platoboost nonce error.";
        onMessage(msg);
        error(msg);
    end
end

--!optimize 2
local copyLink = function()
    local success, link = cacheLink();
    
    if success then
        -- CHANGE 4: Check if clipboard not supported
        if not fSetClipboard then
            onMessage("Clipboard not supported by your executor.");
            return false, "Clipboard not supported";
        end
        
        fSetClipboard(link);
        return true, link
    end
    return false, "Failed to get link"
end

--!optimize 2
local redeemKey = function(key)
    local nonce = generateNonce();
    local endpoint = host .. "/public/redeem/" .. fToString(service);

    local body = {
        identifier = lDigest(fGetHwid()),
        key = key
    }

    if useNonce then
        body.nonce = nonce;
    end

    local response = fRequest({
        Url = endpoint,
        Method = "POST",
        Body = lEncode(body),
        Headers = {
            ["Content-Type"] = "application/json"
        }
    });

    if response.StatusCode == 200 then
        local decoded = lDecode(response.Body);

        if decoded.success == true then
            if decoded.data.valid == true then
                if useNonce then
                    if decoded.data.hash == lDigest("true" .. "-" .. nonce .. "-" .. secret) then
                        return true;
                    else
                        onMessage("failed to verify integrity.");
                        return false;
                    end    
                else
                    return true;
                end
            else
                onMessage("key is invalid.");
                return false;
            end
        else
            if fStringSub(decoded.message, 1, 27) == "unique constraint violation" then
                onMessage("you already have an active key, please wait for it to expire before redeeming it.");
                return false;
            else
                onMessage(decoded.message);
                return false;
            end
        end
    elseif response.StatusCode == 429 then
        onMessage("you are being rate limited, please wait 20 seconds and try again.");
        return false;
    elseif response.StatusCode == 403 then
        onMessage("access denied (403). please wait and try again later.");
        return false;
    else
        onMessage("server returned an invalid status code, please try again later.");
        return false; 
    end
end

--!optimize 2
local verifyKey = function(key)
    if requestSending == true then
        onMessage("a request is already being sent, please slow down.");
        return false;
    else
        requestSending = true;
    end

    local nonce = generateNonce();
    local endpoint = host .. "/public/whitelist/" .. fToString(service) .. "?identifier=" .. lDigest(fGetHwid()) .. "&key=" .. key;

    if useNonce then
        endpoint = endpoint .. "&nonce=" .. nonce;
    end

    local response = fRequest({
        Url = endpoint,
        Method = "GET",
    });

    requestSending = false;

    if response.StatusCode == 200 then
        local decoded = lDecode(response.Body);

        if decoded.success == true then
            if decoded.data.valid == true then
                if useNonce then
                    if decoded.data.hash == lDigest("true" .. "-" .. nonce .. "-" .. secret) then
                        return true;
                    else
                        onMessage("failed to verify integrity.");
                        return false;
                    end
                else
                    return true;
                end
            else
                if fStringSub(key, 1, 4) == "KEY_" then
                    return redeemKey(key);
                else
                    onMessage("key is invalid.");
                    return false;
                end
            end
        else
            onMessage(decoded.message);
            return false;
        end
    elseif response.StatusCode == 429 then
        onMessage("you are being rate limited, please wait 20 seconds and try again.");
        return false;
    elseif response.StatusCode == 403 then
        onMessage("access denied (403). please wait and try again later.");
        return false;
    else
        onMessage("server returned an invalid status code, please try again later.");
        return false;
    end
end

-- File name to store the key locally
local keyFile = "Vex_Key.txt"

-- Functions
local function getSavedKey()
    if isfile and isfile(keyFile) then
        return readfile(keyFile)
    end
    return nil
end

local function saveKey(key)
    if writefile then
        writefile(keyFile, key)
    end
end

-- Check if a saved key exists
local savedKey = getSavedKey()
if savedKey then
    local valid = verifyKey(savedKey)
    if valid then
        onMessage("Saved key verified automatically. Script Loading!")
        
        -- Load main script
        loadstring(game:HttpGet("https://raw.githubusercontent.com/vex9690/niga/refs/heads/main/L"))()
        return  -- stop the key system GUI from loading
    else
        onMessage("Key expired. Please get key and verify again.")
    end
end

--! Create Custom UI
local KeySystemGUI1 = Instance.new("ScreenGui")
KeySystemGUI1.Name = "KeySystemGUI"
KeySystemGUI1.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
KeySystemGUI1.ResetOnSpawn = false
KeySystemGUI1.IgnoreGuiInset = true
KeySystemGUI1.Parent = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")

local Backdrop2 = Instance.new("Frame")
Backdrop2.Name = "Backdrop"
Backdrop2.Size = UDim2.new(1.000000,0,1.000000,0)
Backdrop2.Position = UDim2.new(0.000000,0,0.000000,0)
Backdrop2.AnchorPoint = Vector2.new(0.000000,0.000000)
Backdrop2.BackgroundColor3 = Color3.fromRGB(0,0,0)
Backdrop2.BackgroundTransparency = 0.3
Backdrop2.BorderSizePixel = 0.000000
Backdrop2.Visible = true
Backdrop2.AutomaticSize = Enum.AutomaticSize.None
Backdrop2.ClipsDescendants = false
Backdrop2.LayoutOrder = 0.000000
Backdrop2.Parent = KeySystemGUI1

local MainContainer3 = Instance.new("Frame")
MainContainer3.Name = "MainContainer"
MainContainer3.Size = UDim2.new(0.000000,420,0.000000,450)
MainContainer3.Position = UDim2.new(0.500000,0,0.500000,0)
MainContainer3.AnchorPoint = Vector2.new(0.500000,0.500000)
MainContainer3.BackgroundColor3 = Color3.fromRGB(18,18,22)
MainContainer3.BackgroundTransparency = 0.000000
MainContainer3.BorderSizePixel = 0.000000
MainContainer3.Visible = true
MainContainer3.AutomaticSize = Enum.AutomaticSize.None
MainContainer3.ClipsDescendants = false
MainContainer3.LayoutOrder = 0.000000
MainContainer3.Parent = KeySystemGUI1

local UICorner4 = Instance.new("UICorner")
UICorner4.CornerRadius = UDim.new(0.000000,10)
UICorner4.Parent = MainContainer3

local UIStroke5 = Instance.new("UIStroke")
UIStroke5.Color = Color3.fromRGB(40,40,45)
UIStroke5.Thickness = 1.000000
UIStroke5.Transparency = 0.300000
UIStroke5.ApplyStrokeMode = Enum.ApplyStrokeMode.Contextual
UIStroke5.Parent = MainContainer3

local UIScale6 = Instance.new("UIScale")
UIScale6.Scale = 0.800000
UIScale6.Parent = MainContainer3

local AnimatedBorder7 = Instance.new("Frame")
AnimatedBorder7.Name = "AnimatedBorder"
AnimatedBorder7.Size = UDim2.new(1.000000,6,1.000000,6)
AnimatedBorder7.Position = UDim2.new(0.000000,-3,0.000000,-3)
AnimatedBorder7.AnchorPoint = Vector2.new(0.000000,0.000000)
AnimatedBorder7.BackgroundColor3 = Color3.fromRGB(163,162,165)
AnimatedBorder7.BackgroundTransparency = 1.000000
AnimatedBorder7.BorderSizePixel = 1.000000
AnimatedBorder7.Visible = true
AnimatedBorder7.AutomaticSize = Enum.AutomaticSize.None
AnimatedBorder7.ClipsDescendants = false
AnimatedBorder7.LayoutOrder = 0.000000
AnimatedBorder7.Parent = MainContainer3

local UICorner8 = Instance.new("UICorner")
UICorner8.CornerRadius = UDim.new(0.000000,23)
UICorner8.Parent = AnimatedBorder7

local UIStroke9 = Instance.new("UIStroke")
UIStroke9.Color = Color3.fromRGB(171,0,255)
UIStroke9.Thickness = 2.000000
UIStroke9.Transparency = 0.300000
UIStroke9.ApplyStrokeMode = Enum.ApplyStrokeMode.Contextual
UIStroke9.Parent = AnimatedBorder7

local UIGradient10 = Instance.new("UIGradient")
UIGradient10.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0.000000, Color3.fromRGB(255, 0, 80)),    -- Hot Pink
    ColorSequenceKeypoint.new(0.300000, Color3.fromRGB(255, 20, 147)),  -- Deep Pink
    ColorSequenceKeypoint.new(0.500000, Color3.fromRGB(255, 0, 0)),     -- Bright Red
    ColorSequenceKeypoint.new(0.700000, Color3.fromRGB(220, 20, 60)),   -- Crimson Red
    ColorSequenceKeypoint.new(1.000000, Color3.fromRGB(255, 0, 80))     -- Hot Pink
})
UIGradient10.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0.000000, 0.900000, 0.000000), NumberSequenceKeypoint.new(0.200000, 0.100000, 0.000000), NumberSequenceKeypoint.new(0.800000, 0.100000, 0.000000), NumberSequenceKeypoint.new(1.000000, 0.900000, 0.000000)})
UIGradient10.Rotation = 30.094213
UIGradient10.Offset = Vector2.new(0.000000,0.000000)
UIGradient10.Parent = UIStroke9

local Header11 = Instance.new("Frame")
Header11.Name = "Header"
Header11.Size = UDim2.new(1.000000,0,0.000000,100)
Header11.Position = UDim2.new(0.000000,0,0.000000,0)
Header11.AnchorPoint = Vector2.new(0.000000,0.000000)
Header11.BackgroundColor3 = Color3.fromRGB(163,162,165)
Header11.BackgroundTransparency = 1.000000
Header11.BorderSizePixel = 1.000000
Header11.Visible = true
Header11.AutomaticSize = Enum.AutomaticSize.None
Header11.ClipsDescendants = false
Header11.LayoutOrder = 0.000000
Header11.Parent = MainContainer3

--! Add Close Button to Header
local CloseButton = Instance.new("TextButton")
CloseButton.Name = "CloseButton"
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Position = UDim2.new(1, -35, 0, 10)
CloseButton.AnchorPoint = Vector2.new(0, 0)
CloseButton.BackgroundColor3 = Color3.fromRGB(220, 60, 60)
CloseButton.BackgroundTransparency = 0
CloseButton.BorderSizePixel = 0
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextSize = 16
CloseButton.TextScaled = false
CloseButton.TextWrapped = false
CloseButton.Font = Enum.Font.GothamBold
CloseButton.Visible = true
CloseButton.AutoButtonColor = false
CloseButton.Parent = Header11

local CloseButtonCorner = Instance.new("UICorner")
CloseButtonCorner.CornerRadius = UDim.new(0, 6)
CloseButtonCorner.Parent = CloseButton

local CloseButtonStroke = Instance.new("UIStroke")
CloseButtonStroke.Color = Color3.fromRGB(150, 40, 40)
CloseButtonStroke.Thickness = 1.5
CloseButtonStroke.Parent = CloseButton

local Frame12 = Instance.new("Frame")
Frame12.Name = "Frame"
Frame12.Size = UDim2.new(0.000000,56,0.000000,56)
Frame12.Position = UDim2.new(0.500000,-28,0.000000,24)
Frame12.AnchorPoint = Vector2.new(0.000000,0.000000)
Frame12.BackgroundColor3 = Color3.fromRGB(45,45,50)
Frame12.BackgroundTransparency = 0.000000
Frame12.BorderSizePixel = 0.000000
Frame12.Visible = true
Frame12.AutomaticSize = Enum.AutomaticSize.None
Frame12.ClipsDescendants = false
Frame12.LayoutOrder = 0.000000
Frame12.Parent = Header11

local UICorner13 = Instance.new("UICorner")
UICorner13.CornerRadius = UDim.new(0.000000,14)
UICorner13.Parent = Frame12

local Frame14 = Instance.new("Frame")
Frame14.Name = "Frame"
Frame14.Size = UDim2.new(1.000000,12,1.000000,12)
Frame14.Position = UDim2.new(0.000000,-6,0.000000,-6)
Frame14.AnchorPoint = Vector2.new(0.000000,0.000000)
Frame14.BackgroundColor3 = Color3.fromRGB(163,162,165)
Frame14.BackgroundTransparency = 1.000000
Frame14.BorderSizePixel = 1.000000
Frame14.Visible = true
Frame14.AutomaticSize = Enum.AutomaticSize.None
Frame14.ClipsDescendants = false
Frame14.LayoutOrder = 0.000000
Frame14.Parent = Frame12

local UICorner15 = Instance.new("UICorner")
UICorner15.CornerRadius = UDim.new(0.000000,20)
UICorner15.Parent = Frame14

local UIStroke16 = Instance.new("UIStroke")
UIStroke16.Color = Color3.fromRGB(255,255,255)
UIStroke16.Thickness = 3.000000
UIStroke16.Transparency = 0.200000
UIStroke16.ApplyStrokeMode = Enum.ApplyStrokeMode.Contextual
UIStroke16.Parent = Frame14

local UIGradient17 = Instance.new("UIGradient")
UIGradient17.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0.000000, Color3.fromRGB(255, 105, 180)), -- Hot Pink
    ColorSequenceKeypoint.new(0.500000, Color3.fromRGB(255, 0, 80)),    -- Bright Pink-Red
    ColorSequenceKeypoint.new(1.000000, Color3.fromRGB(255, 105, 180))  -- Hot Pink
})
UIGradient17.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0.000000, 0.800000, 0.000000), NumberSequenceKeypoint.new(0.200000, 0.050000, 0.000000), NumberSequenceKeypoint.new(0.800000, 0.050000, 0.000000), NumberSequenceKeypoint.new(1.000000, 0.800000, 0.000000)})
UIGradient17.Rotation = 159.719406
UIGradient17.Offset = Vector2.new(0.000000,0.000000)
UIGradient17.Parent = UIStroke16

local ImageLabel18 = Instance.new("ImageLabel")
ImageLabel18.Name = "ImageLabel"
ImageLabel18.Size = UDim2.new(1.000000,0,1.000000,0)
ImageLabel18.Position = UDim2.new(0.000000,0,0.000000,0)
ImageLabel18.AnchorPoint = Vector2.new(0.000000,0.000000)
ImageLabel18.BackgroundColor3 = Color3.fromRGB(163,162,165)
ImageLabel18.BackgroundTransparency = 1.000000
ImageLabel18.BorderSizePixel = 1.000000
ImageLabel18.Image = "rbxassetid://114311656223665"
ImageLabel18.ImageColor3 = Color3.fromRGB(255,255,255)
ImageLabel18.ImageTransparency = 0.100000
ImageLabel18.ScaleType = Enum.ScaleType.Fit
ImageLabel18.SliceCenter = Rect.new(0,0,0,0)
ImageLabel18.Visible = true
ImageLabel18.Parent = Frame12

local UICorner19 = Instance.new("UICorner")
UICorner19.CornerRadius = UDim.new(0.000000,14)
UICorner19.Parent = ImageLabel18

local Content20 = Instance.new("Frame")
Content20.Name = "Content"
Content20.Size = UDim2.new(1.000000,-64,0.000000,440)
Content20.Position = UDim2.new(0.000000,32,0.000000,120)
Content20.AnchorPoint = Vector2.new(0.000000,0.000000)
Content20.BackgroundColor3 = Color3.fromRGB(163,162,165)
Content20.BackgroundTransparency = 1.000000
Content20.BorderSizePixel = 1.000000
Content20.Visible = true
Content20.AutomaticSize = Enum.AutomaticSize.None
Content20.ClipsDescendants = false
Content20.LayoutOrder = 0.000000
Content20.Parent = MainContainer3

local TextLabel21 = Instance.new("TextLabel")
TextLabel21.Name = "TextLabel"
TextLabel21.Size = UDim2.new(1.000000,0,0.000000,32)
TextLabel21.Position = UDim2.new(0.000000,0,0.000000,0)
TextLabel21.AnchorPoint = Vector2.new(0.000000,0.000000)
TextLabel21.BackgroundColor3 = Color3.fromRGB(163,162,165)
TextLabel21.BackgroundTransparency = 1.000000
TextLabel21.BorderSizePixel = 1.000000
TextLabel21.Visible = true
TextLabel21.AutomaticSize = Enum.AutomaticSize.None
TextLabel21.ClipsDescendants = false
TextLabel21.LayoutOrder = 0.000000
TextLabel21.Active = false
TextLabel21.Selectable = false
TextLabel21.SizeConstraint = Enum.SizeConstraint.RelativeXY
TextLabel21.ZIndex = 12.000000
TextLabel21.Rotation = 0.000000
TextLabel21.Transparency = 1.000000
TextLabel21.Text = "VEX - KEYSYSTEM"
TextLabel21.TextColor3 = Color3.fromRGB(220,220,225)
TextLabel21.TextSize = 35.000000
TextLabel21.Font = Enum.Font.GothamBold
TextLabel21.TextScaled = false
TextLabel21.TextWrapped = false
TextLabel21.RichText = false
TextLabel21.LineHeight = 1.000000
TextLabel21.MaxVisibleGraphemes = -1.000000
TextLabel21.TextTransparency = 0.000000
TextLabel21.TextStrokeColor3 = Color3.fromRGB(0,0,0)
TextLabel21.TextStrokeTransparency = 1.000000
TextLabel21.TextTruncate = Enum.TextTruncate.None
TextLabel21.TextXAlignment = Enum.TextXAlignment.Center
TextLabel21.TextYAlignment = Enum.TextYAlignment.Center
TextLabel21.Parent = Content20

local TextLabel22 = Instance.new("TextLabel")
TextLabel22.Name = "TextLabel"
TextLabel22.Size = UDim2.new(1.000000,0,0.000000,40)
TextLabel22.Position = UDim2.new(0.000000,0,0.000000,40)
TextLabel22.AnchorPoint = Vector2.new(0.000000,0.000000)
TextLabel22.BackgroundColor3 = Color3.fromRGB(163,162,165)
TextLabel22.BackgroundTransparency = 1.000000
TextLabel22.BorderSizePixel = 1.000000
TextLabel22.Visible = true
TextLabel22.AutomaticSize = Enum.AutomaticSize.None
TextLabel22.ClipsDescendants = false
TextLabel22.LayoutOrder = 0.000000
TextLabel22.Active = false
TextLabel22.Selectable = false
TextLabel22.SizeConstraint = Enum.SizeConstraint.RelativeXY
TextLabel22.ZIndex = 12.000000
TextLabel22.Rotation = 0.000000
TextLabel22.Transparency = 1.000000
TextLabel22.Text = "Enter your key to continue"
TextLabel22.TextColor3 = Color3.fromRGB(140,140,150)
TextLabel22.TextSize = 18.000000
TextLabel22.Font = Enum.Font.Ubuntu
TextLabel22.TextScaled = false
TextLabel22.TextWrapped = true
TextLabel22.RichText = false
TextLabel22.LineHeight = 1.000000
TextLabel22.MaxVisibleGraphemes = -1.000000
TextLabel22.TextTransparency = 0.000000
TextLabel22.TextStrokeColor3 = Color3.fromRGB(0,0,0)
TextLabel22.TextStrokeTransparency = 1.000000
TextLabel22.TextTruncate = Enum.TextTruncate.None
TextLabel22.TextXAlignment = Enum.TextXAlignment.Center
TextLabel22.TextYAlignment = Enum.TextYAlignment.Center
TextLabel22.Parent = Content20

local Frame23 = Instance.new("Frame")
Frame23.Name = "Frame"
Frame23.Size = UDim2.new(1.000000,0,0.000000,100)
Frame23.Position = UDim2.new(0.000000,0,0.000000,100)
Frame23.AnchorPoint = Vector2.new(0.000000,0.000000)
Frame23.BackgroundColor3 = Color3.fromRGB(163,162,165)
Frame23.BackgroundTransparency = 1.000000
Frame23.BorderSizePixel = 1.000000
Frame23.Visible = true
Frame23.AutomaticSize = Enum.AutomaticSize.None
Frame23.ClipsDescendants = false
Frame23.LayoutOrder = 0.000000
Frame23.Parent = Content20

local Frame24 = Instance.new("Frame")
Frame24.Name = "Frame"
Frame24.Size = UDim2.new(1.000000,0,0.000000,52)
Frame24.Position = UDim2.new(0.000000,0,0.000000,0)
Frame24.AnchorPoint = Vector2.new(0.000000,0.000000)
Frame24.BackgroundColor3 = Color3.fromRGB(35, 35, 40)
Frame24.BackgroundTransparency = 0.000000
Frame24.BorderSizePixel = 0.000000
Frame24.Visible = true
Frame24.AutomaticSize = Enum.AutomaticSize.None
Frame24.ClipsDescendants = false
Frame24.LayoutOrder = 0.000000
Frame24.Parent = Frame23

local UICorner25 = Instance.new("UICorner")
UICorner25.CornerRadius = UDim.new(0.000000,12)
UICorner25.Parent = Frame24

local UIStroke26 = Instance.new("UIStroke")
UIStroke26.Color = Color3.fromRGB(40,40,45)
UIStroke26.Thickness = 1.000000
UIStroke26.Transparency = 0.300000
UIStroke26.ApplyStrokeMode = Enum.ApplyStrokeMode.Contextual
UIStroke26.Parent = Frame24

local TextBox31 = Instance.new("TextBox")
TextBox31.Name = "TextBox"
TextBox31.Size = UDim2.new(1.000000,-24,1.000000,0)
TextBox31.Position = UDim2.new(0.000000,12,0.000000,0)
TextBox31.AnchorPoint = Vector2.new(0.000000,0.000000)
TextBox31.BackgroundColor3 = Color3.fromRGB(163,162,165)
TextBox31.BackgroundTransparency = 1.000000
TextBox31.BorderSizePixel = 1.000000
TextBox31.Text = ""
TextBox31.TextColor3 = Color3.fromRGB(220,220,225)
TextBox31.TextSize = 20.000000
TextBox31.Font = Enum.Font.Ubuntu
TextBox31.TextScaled = false
TextBox31.TextWrapped = false
TextBox31.RichText = false
TextBox31.Visible = true
TextBox31.ClearTextOnFocus = false
TextBox31.MultiLine = false
TextBox31.PlaceholderText = "Enter key here"
TextBox31.PlaceholderColor3 = Color3.fromRGB(140,140,150)
TextBox31.CursorPosition = 1.000000
TextBox31.SelectionStart = -1.000000
TextBox31.ShowNativeInput = true
TextBox31.TextEditable = true
TextBox31.Parent = Frame24

-- REMOVED character count label since Platoboost key length varies

local TextButton33 = Instance.new("TextButton")
TextButton33.Name = "TextButton"
TextButton33.Size = UDim2.new(1.000000,0,0.000000,48)
TextButton33.Position = UDim2.new(0.000000,0,0.000000,200)
TextButton33.AnchorPoint = Vector2.new(0.000000,0.000000)
TextButton33.BackgroundColor3 = Color3.fromRGB(40,140,100)
TextButton33.BackgroundTransparency = 0.000000
TextButton33.BorderSizePixel = 0.000000
TextButton33.Text = "Verify Key"
TextButton33.TextColor3 = Color3.fromRGB(220,220,225)
TextButton33.TextSize = 20.000000
TextButton33.Font = Enum.Font.GothamBold
TextButton33.TextScaled = false
TextButton33.TextWrapped = false
TextButton33.RichText = false
TextButton33.Visible = true
TextButton33.AutoButtonColor = false
TextButton33.Parent = Content20

local UICorner34 = Instance.new("UICorner")
UICorner34.CornerRadius = UDim.new(0.000000,12)
UICorner34.Parent = TextButton33

local Frame43 = Instance.new("Frame")
Frame43.Name = "Frame"
Frame43.Size = UDim2.new(1.000000,0,0.000000,48)
Frame43.Position = UDim2.new(0.000000,0,0.000000,260)
Frame43.AnchorPoint = Vector2.new(0.000000,0.000000)
Frame43.BackgroundColor3 = Color3.fromRGB(163,162,165)
Frame43.BackgroundTransparency = 1.000000
Frame43.BorderSizePixel = 1.000000
Frame43.Visible = true
Frame43.AutomaticSize = Enum.AutomaticSize.None
Frame43.ClipsDescendants = false
Frame43.LayoutOrder = 0.000000
Frame43.Parent = Content20

local TextButton44 = Instance.new("TextButton")
TextButton44.Name = "TextButton"
TextButton44.Size = UDim2.new(1.000000,0,0.000000,48)
TextButton44.Position = UDim2.new(0.000000,0,0.000000,0)
TextButton44.AnchorPoint = Vector2.new(0.000000,0.000000)
TextButton44.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
TextButton44.BackgroundTransparency = 0.000000
TextButton44.BorderSizePixel = 0.000000
TextButton44.Text = "Get Key"
TextButton44.TextColor3 = Color3.fromRGB(220,220,225)
TextButton44.TextSize = 20.000000
TextButton44.Font = Enum.Font.GothamBold
TextButton44.TextScaled = false
TextButton44.TextWrapped = false
TextButton44.RichText = false
TextButton44.Visible = true
TextButton44.AutoButtonColor = false
TextButton44.Parent = Frame43

local UICorner45 = Instance.new("UICorner")
UICorner45.CornerRadius = UDim.new(0.000000,10)
UICorner45.Parent = TextButton44

local Frame50 = Instance.new("Frame")
Frame50.Name = "Frame"
Frame50.Size = UDim2.new(1.000000,0,0.000000,60)
Frame50.Position = UDim2.new(0.000000,0,0.000000,330)
Frame50.AnchorPoint = Vector2.new(0.000000,0.000000)
Frame50.BackgroundColor3 = Color3.fromRGB(163,162,165)
Frame50.BackgroundTransparency = 1.000000
Frame50.BorderSizePixel = 1.000000
Frame50.Visible = true
Frame50.AutomaticSize = Enum.AutomaticSize.None
Frame50.ClipsDescendants = false
Frame50.LayoutOrder = 0.000000
Frame50.Parent = Content20

local TextLabel51 = Instance.new("TextLabel")
TextLabel51.Name = "TextLabel"
TextLabel51.Size = UDim2.new(1.000000,0,1.000000,0)
TextLabel51.Position = UDim2.new(0.000000,0,0.000000,0)
TextLabel51.AnchorPoint = Vector2.new(0.000000,0.000000)
TextLabel51.BackgroundColor3 = Color3.fromRGB(163,162,165)
TextLabel51.BackgroundTransparency = 1.000000
TextLabel51.BorderSizePixel = 1.000000
TextLabel51.Visible = true
TextLabel51.AutomaticSize = Enum.AutomaticSize.None
TextLabel51.ClipsDescendants = false
TextLabel51.LayoutOrder = 0.000000
TextLabel51.Active = false
TextLabel51.Selectable = false
TextLabel51.SizeConstraint = Enum.SizeConstraint.RelativeXY
TextLabel51.ZIndex = 13.000000
TextLabel51.Rotation = 0.000000
TextLabel51.Transparency = 1.000000
TextLabel51.Text = ""
TextLabel51.TextColor3 = Color3.fromRGB(180,50,50)
TextLabel51.TextSize = 14.000000
TextLabel51.Font = Enum.Font.GothamBold
TextLabel51.TextScaled = false
TextLabel51.TextWrapped = true
TextLabel51.RichText = false
TextLabel51.LineHeight = 1.000000
TextLabel51.MaxVisibleGraphemes = -1.000000
TextLabel51.TextTransparency = 1.000000
TextLabel51.TextStrokeColor3 = Color3.fromRGB(0,0,0)
TextLabel51.TextStrokeTransparency = 1.000000
TextLabel51.TextTruncate = Enum.TextTruncate.None
TextLabel51.TextXAlignment = Enum.TextXAlignment.Center
TextLabel51.TextYAlignment = Enum.TextYAlignment.Center
TextLabel51.Parent = Frame50

--! Create Option Selection Popup (Simplified - removed title)
local OptionPopup = Instance.new("Frame")
OptionPopup.Name = "OptionPopup"
OptionPopup.Size = UDim2.new(1, 0, 1, 0)
OptionPopup.Position = UDim2.new(0, 0, 0, 0)
OptionPopup.BackgroundColor3 = Color3.fromRGB(18,18,22)
OptionPopup.BackgroundTransparency = 0.08
OptionPopup.BorderSizePixel = 0
OptionPopup.Visible = false
OptionPopup.ZIndex = 100
OptionPopup.Parent = MainContainer3

local OptionUICorner = Instance.new("UICorner")
OptionUICorner.CornerRadius = UDim.new(0, 10)
OptionUICorner.Parent = OptionPopup

-- Key Tutorial Button (Blue color)
local TutorialButton = Instance.new("TextButton")
TutorialButton.Name = "TutorialButton"
TutorialButton.Size = UDim2.new(0.8, 0, 0, 48)
TutorialButton.Position = UDim2.new(0.1, 0, 0.3, 0) -- Adjusted position up
TutorialButton.BackgroundColor3 = Color3.fromRGB(60, 120, 220) -- Blue color
TutorialButton.Text = "Key Tutorial"
TutorialButton.TextColor3 = Color3.fromRGB(220,220,225)
TutorialButton.TextSize = 20
TutorialButton.Font = Enum.Font.GothamBold
TutorialButton.ZIndex = 101
TutorialButton.AutoButtonColor = false
TutorialButton.Parent = OptionPopup

local TutorialCorner = Instance.new("UICorner")
TutorialCorner.CornerRadius = UDim.new(0, 8)
TutorialCorner.Parent = TutorialButton

-- Copy Key Link Button (Red color - same as Get Key button)
local CopyKeyButton = Instance.new("TextButton")
CopyKeyButton.Name = "CopyKeyButton"
CopyKeyButton.Size = UDim2.new(0.8, 0, 0, 48)
CopyKeyButton.Position = UDim2.new(0.1, 0, 0.5, 0) -- Adjusted position up
CopyKeyButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0) -- Same as Get Key button
CopyKeyButton.Text = "Copy Key Link"
CopyKeyButton.TextColor3 = Color3.fromRGB(220,220,225)
CopyKeyButton.TextSize = 20
CopyKeyButton.Font = Enum.Font.GothamBold
CopyKeyButton.ZIndex = 101
CopyKeyButton.AutoButtonColor = false
CopyKeyButton.Parent = OptionPopup

local CopyKeyCorner = Instance.new("UICorner")
CopyKeyCorner.CornerRadius = UDim.new(0, 8)
CopyKeyCorner.Parent = CopyKeyButton

local CloseOptionButton = Instance.new("TextButton")
CloseOptionButton.Name = "CloseOptionButton"
CloseOptionButton.Size = UDim2.new(0.8, 0, 0, 40)
CloseOptionButton.Position = UDim2.new(0.1, 0, 0.7, 0) -- Adjusted position up
CloseOptionButton.BackgroundColor3 = Color3.fromRGB(60,60,70)
CloseOptionButton.Text = "Close"
CloseOptionButton.TextColor3 = Color3.fromRGB(220,220,225)
CloseOptionButton.TextSize = 20
CloseOptionButton.Font = Enum.Font.GothamBold
CloseOptionButton.ZIndex = 101
CloseOptionButton.AutoButtonColor = false
CloseOptionButton.Parent = OptionPopup

local CloseOptionCorner = Instance.new("UICorner")
CloseOptionCorner.CornerRadius = UDim.new(0, 8)
CloseOptionCorner.Parent = CloseOptionButton

--! Draggable Functionality - Fixed for both PC and Mobile
local UserInputService = game:GetService("UserInputService")
local dragging = false
local dragInput
local dragStart
local startPos

local function update(input)
    local delta = input.Position - dragStart
    MainContainer3.Position = UDim2.new(
        startPos.X.Scale, 
        startPos.X.Offset + delta.X, 
        startPos.Y.Scale, 
        startPos.Y.Offset + delta.Y
    )
end

MainContainer3.InputBegan:Connect(function(input)
    -- Check for both MouseButton1 (PC) and Touch (Mobile)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = MainContainer3.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

MainContainer3.InputChanged:Connect(function(input)
    -- Check for both MouseMovement (PC) and Touch (Mobile)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and input == dragInput then
        update(input)
    end
end)

--! UI Notification Function
local TweenService = game:GetService("TweenService")

local function showNotification(message, isSuccess)
    TextLabel51.Text = message
    if isSuccess then
        TextLabel51.TextColor3 = Color3.fromRGB(50, 180, 50)  -- Green for success
    else
        TextLabel51.TextColor3 = Color3.fromRGB(180, 50, 50)  -- Red for error
    end
    
    -- Fade in
    local fadeIn = TweenService:Create(TextLabel51, TweenInfo.new(0.3), {TextTransparency = 0})
    fadeIn:Play()
    
    -- Wait and fade out
    task.wait(3.5)
    local fadeOut = TweenService:Create(TextLabel51, TweenInfo.new(0.3), {TextTransparency = 1})
    fadeOut:Play()
end

--! UI Functionality

-- REMOVED character count update since Platoboost key length varies

-- Enter key to submit
TextBox31.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        TextButton33:Activate()
    end
end)

-- Verify Key Button
TextButton33.MouseButton1Click:Connect(function()
    local key = TextBox31.Text:gsub("%s+", "") -- Remove whitespace
    
    if key == "" then
        showNotification("Please enter a key first.", false)
        return
    end

    -- Platoboost keys can vary in length, so removed length check

    -- Change button to loading state
    local originalText = TextButton33.Text
    TextButton33.Text = "Verifying..."
    TextButton33.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
    
    local valid = verifyKey(key)  -- Platoboost verify function
    
    if valid then
        -- CHANGE 5: Fixed misleading success message
        showNotification("Key verified successfully! Loading script...", true)
        
        -- Save the key locally
        saveKey(key)
        
        -- Destroy GUI
        task.wait(0.5)
        KeySystemGUI1:Destroy()
        
        -- Load main script
        loadstring(game:HttpGet("https://raw.githubusercontent.com/vex9690/niga/refs/heads/main/L"))()
    else
        TextButton33.Text = originalText
        TextButton33.BackgroundColor3 = Color3.fromRGB(40,140,100)
        showNotification("Key is invalid or expired.", false)
    end
end)

-- Get Key Button
TextButton44.MouseButton1Click:Connect(function()
    OptionPopup.Visible = true
    OptionPopup.BackgroundTransparency = 1
    
    local fadeIn = TweenService:Create(OptionPopup, TweenInfo.new(0.3), {BackgroundTransparency = 0.08})
    fadeIn:Play()
end)

-- Close Button - Fixed
CloseButton.MouseButton1Click:Connect(function()
    local fadeOut = TweenService:Create(Backdrop2, TweenInfo.new(0.3), {BackgroundTransparency = 1})
    fadeOut:Play()
    local fadeOut2 = TweenService:Create(MainContainer3, TweenInfo.new(0.3), {BackgroundTransparency = 1})
    fadeOut2:Play()
    
    task.wait(0.3)
    KeySystemGUI1:Destroy()
end)

-- Close Button Hover Effects
CloseButton.MouseEnter:Connect(function()
    TweenService:Create(CloseButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(240, 80, 80)}):Play()
end)

CloseButton.MouseLeave:Connect(function()
    TweenService:Create(CloseButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(220, 60, 60)}):Play()
end)

-- YouTube Tutorial Button (copies YouTube video link)
TutorialButton.MouseButton1Click:Connect(function()
    local youtubeUrl = "https://discord.gg/FvMePtyJrq" -- Replace with actual YouTube URL
    
    if setclipboard then
        setclipboard(youtubeUrl)
        
        -- Change button text to "Copied!"
        local originalText = TutorialButton.Text
        TutorialButton.Text = "Link Copied!"
        
        -- Change button color to green
        local originalColor = TutorialButton.BackgroundColor3
        TutorialButton.BackgroundColor3 = Color3.fromRGB(40, 140, 100)

        showNotification("Discord link copied to clipboard!", true)

        task.wait(2)
            
        -- Change back to original
        TutorialButton.Text = originalText
        TutorialButton.BackgroundColor3 = originalColor
        
    else
        showNotification("Key Tutorial: " .. youtubeUrl, false)
    end
    
    OptionPopup.Visible = false
end)

-- Copy Key Link Button (uses Platoboost copyLink function)
CopyKeyButton.MouseButton1Click:Connect(function()
    local success, linkOrMessage = copyLink()  -- Platoboost copyLink function
    
    if success then
        -- Change button text to "Copied!"
        local originalText = CopyKeyButton.Text
        CopyKeyButton.Text = "Link Copied!"
        
        -- Change button color to green
        local originalColor = CopyKeyButton.BackgroundColor3
        CopyKeyButton.BackgroundColor3 = Color3.fromRGB(40, 140, 100)

        showNotification("Key link copied to clipboard!", true)

        task.wait(2)
            
        -- Change back to original
        CopyKeyButton.Text = originalText
        CopyKeyButton.BackgroundColor3 = originalColor
    else
        showNotification("Failed to get key link: " .. linkOrMessage, false)
    end
    
    OptionPopup.Visible = false
end)

CloseOptionButton.MouseButton1Click:Connect(function()
    OptionPopup.Visible = false
end)

-- Button hover effects
local function setupButtonHover(button, defaultColor, hoverTransparency)
    hoverTransparency = hoverTransparency or 0.1
    
    button.MouseEnter:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.2), {BackgroundTransparency = hoverTransparency}):Play()
    end)
    
    button.MouseLeave:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.2), {BackgroundTransparency = 0}):Play()
    end)
end

setupButtonHover(TextButton33, Color3.fromRGB(40,140,100))
setupButtonHover(TextButton44, Color3.fromRGB(255, 0, 0))
setupButtonHover(TutorialButton, Color3.fromRGB(60, 120, 220)) -- Blue hover effect
setupButtonHover(CopyKeyButton, Color3.fromRGB(255, 0, 0)) -- Red hover effect
setupButtonHover(CloseOptionButton, Color3.fromRGB(60,60,70), 0.2)

-- Animate the border gradient rotation
spawn(function()
    while KeySystemGUI1.Parent do
        for i = 0, 360, 1 do
            if not KeySystemGUI1.Parent then break end
            UIGradient10.Rotation = i
            UIGradient17.Rotation = i
            task.wait(0.03)
        end
    end
end)

-- Auto-focus the textbox
task.wait(0.5)
TextBox31:CaptureFocus()
